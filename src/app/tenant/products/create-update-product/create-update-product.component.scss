// Dialog Styles
::ng-deep {
  .product-dialog {
    .p-dialog {
      @apply rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 overflow-hidden;
    }
    
    .p-dialog-header {
      @apply bg-gradient-to-r from-gray-50 to-white dark:from-gray-800 dark:to-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-5;
    }
    
    .p-dialog-content {
      @apply bg-white dark:bg-gray-800 px-6 py-6 max-h-[80vh] overflow-y-auto;
    }
    
    .p-dialog-footer {
      @apply bg-gray-50 dark:bg-gray-800/50 border-t border-gray-200 dark:border-gray-700 px-6 py-4;
    }
  }
}

// Dialog Header
.dialog-header {
  @apply w-full;
}

.dialog-header-content {
  @apply flex items-start gap-4;
}

.dialog-icon-wrapper {
  @apply flex items-center justify-center w-12 h-12 rounded-xl bg-primary-100 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400 flex-shrink-0;
  
  i {
    @apply text-2xl;
  }
}

.dialog-title-wrapper {
  @apply flex-1 min-w-0;
}

.dialog-title {
  @apply m-0 text-xl font-bold text-gray-900 dark:text-gray-100 mb-1;
}

.dialog-subtitle {
  @apply m-0 text-sm text-gray-500 dark:text-gray-400;
}

// Form Styles
.product-form {
  @apply space-y-6;
}

.form-section {
  @apply mb-8 last:mb-0 pb-6 border-b border-gray-200 dark:border-gray-700 last:border-b-0;
}

.section-title {
  @apply flex items-center gap-2 mb-4 text-lg font-semibold text-gray-900 dark:text-gray-100;
  
  i {
    @apply text-primary-600 dark:text-primary-400;
  }
}

.form-field {
  @apply mb-6 last:mb-0;
}

.form-label-row {
  @apply flex items-center justify-between mb-2;
}

.form-label {
  @apply flex items-center gap-2 mb-2 text-sm font-semibold text-gray-700 dark:text-gray-300;
  
  .label-text {
    @apply font-medium;
  }
  
  .label-required {
    @apply text-red-500 dark:text-red-400 font-bold;
  }
  
  .label-optional {
    @apply text-gray-400 dark:text-gray-500 font-normal text-xs;
  }
}

// Input Wrapper
.input-wrapper {
  @apply relative block w-full;
  
  .input-icon {
    @apply absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500 z-10 pointer-events-none;
  }
  
  .form-input {
    @apply w-full pl-10 pr-4 py-2.5 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-transparent transition-all;
    
    &.readonly {
      @apply bg-gray-50 dark:bg-gray-800 cursor-not-allowed;
    }
    
    &.ng-invalid {
      @apply border-red-500 dark:border-red-400 focus:ring-red-500 dark:focus:ring-red-400;
    }
  }
}

// Textarea Wrapper
.textarea-wrapper {
  @apply block w-full;
  
  .form-textarea {
    @apply w-full px-4 py-3 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-transparent transition-all resize-none;
    
    &.ng-invalid {
      @apply border-red-500 dark:border-red-400 focus:ring-red-500 dark:focus:ring-red-400;
    }
  }
}

.textarea-footer {
  @apply flex items-center justify-between mt-2;
  
  .character-count {
    @apply text-xs text-gray-500 dark:text-gray-400 ml-auto;
    
    &.warning {
      @apply text-orange-500 dark:text-orange-400 font-medium;
    }
  }
}

// Dropdown Wrapper
.dropdown-wrapper {
  @apply block w-full;
  
  .form-dropdown {
    @apply w-full;
  }
  
  .dropdown-item {
    @apply flex items-center gap-2 px-2 py-1;
    
    i {
      @apply text-gray-400 dark:text-gray-500;
    }
  }
}

// Input Number Wrapper
.input-number-wrapper {
  @apply block w-full;
  
  .form-input-number {
    @apply w-full;
  }
}

// Auto Generate Toggle
.auto-generate-toggle {
  @apply flex items-center gap-2;
  
  .toggle-switch {
    @apply scale-110;
  }
  
  .toggle-label {
    @apply text-sm text-gray-600 dark:text-gray-400 font-medium;
  }
}

// File Upload
.file-upload-wrapper {
  @apply w-full;
}

.image-upload-section {
  @apply w-full;
}

::ng-deep {
  .file-upload-component {
    .p-fileupload-buttonbar {
      @apply bg-gray-50 dark:bg-gray-800/50 border border-gray-200 dark:border-gray-700 rounded-lg p-3;
    }
    
    .p-fileupload-choose {
      @apply w-full justify-center py-3 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 border border-gray-300 dark:border-gray-600 rounded-lg transition-all;
    }
  }
}

// Image Gallery Section
.image-gallery-section {
  @apply mt-4;
}

.gallery-header {
  @apply flex items-center justify-between mb-4 p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg border border-gray-200 dark:border-gray-700;
  
  .gallery-count {
    @apply flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300;
    
    i {
      @apply text-primary-600 dark:text-primary-400;
    }
  }
  
  .gallery-hint {
    @apply text-xs text-gray-500 dark:text-gray-400;
  }
}

.image-gallery {
  @apply grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4;
}

.gallery-item {
  @apply relative;
  
  &.primary {
    .gallery-item-wrapper {
      @apply ring-2 ring-primary-500 dark:ring-primary-400;
    }
  }
}

.gallery-item-wrapper {
  @apply relative aspect-square rounded-xl overflow-hidden border-2 border-gray-200 dark:border-gray-700 shadow-lg transition-all hover:shadow-xl;
  
  .gallery-image {
    @apply w-full h-full object-cover;
  }
  
  .gallery-overlay {
    @apply absolute inset-0 bg-black/50 opacity-0 transition-opacity flex items-center justify-center;
    
    .gallery-actions {
      @apply flex items-center gap-2;
      
      .gallery-action-btn {
        @apply w-10 h-10;
      }
    }
  }
  
  &:hover .gallery-overlay {
    @apply opacity-100;
  }
  
  .primary-badge {
    @apply absolute top-2 left-2 px-2 py-1 bg-primary-600 dark:bg-primary-500 text-white text-xs font-medium rounded-lg flex items-center gap-1;
    
    i {
      @apply text-xs;
    }
  }
  
  .image-index {
    @apply absolute bottom-2 right-2 w-6 h-6 bg-black/60 text-white text-xs font-medium rounded-full flex items-center justify-center;
  }
}

// Switch Container
.form-field-switch {
  @apply mb-0;
}

.switch-container {
  @apply flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg border border-gray-200 dark:border-gray-700;
}

.switch-label-group {
  @apply flex-1;
  
  .form-label {
    @apply mb-1;
  }
  
  .form-hint {
    @apply m-0 text-xs;
  }
}

.status-switch {
  @apply scale-125;
}

// Form Hints and Errors
.form-hint {
  @apply flex items-center gap-1.5 mt-2 text-xs text-gray-500 dark:text-gray-400;
  
  i {
    @apply text-xs;
  }
}

.form-error {
  @apply flex items-center gap-1.5 mt-2 text-xs text-red-600 dark:text-red-400 font-medium;
  
  i {
    @apply text-xs;
  }
}

// Dialog Footer
.dialog-footer {
  @apply flex items-center justify-end gap-3;
}

.footer-btn {
  @apply px-6 py-2.5 font-medium transition-all;
  
  &.footer-btn-cancel {
    @apply text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100;
  }
  
  &.footer-btn-submit {
    @apply shadow-sm hover:shadow-md;
  }
}

// PrimeNG Component Overrides
::ng-deep {
  .product-dialog {
    // Dropdown
    .p-dropdown {
      @apply w-full;
      
      .p-dropdown-label {
        @apply px-4 py-2.5 text-gray-900 dark:text-gray-100;
      }
      
      .p-dropdown-trigger {
        width: 3rem;
      }
      
      &.p-focus {
        @apply border-primary-500 dark:border-primary-400 ring-2 ring-primary-500/20 dark:ring-primary-400/20;
      }
    }
    
    // Input Number
    .p-inputnumber {
      @apply w-full;
      
      .p-inputnumber-input {
        @apply px-4 py-2.5 text-gray-900 dark:text-gray-100;
      }
      
      .p-inputnumber-button {
        @apply bg-gray-100 dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300;
        
        &:hover {
          @apply bg-gray-200 dark:bg-gray-600;
        }
      }
    }
    
    // Input Switch
    .p-inputswitch {
      @apply scale-125;
      
      &.p-inputswitch-checked {
        .p-inputswitch-slider {
          @apply bg-primary-600 dark:bg-primary-500;
        }
      }
    }
    
    // Buttons
    .p-button {
      @apply transition-all duration-200;
      
      &:not(.p-button-text):not(.p-button-outlined) {
        @apply shadow-sm hover:shadow-md;
      }
    }
    
    // File Upload
    .p-fileupload {
      .p-button {
        @apply w-full;
      }
    }
  }
  
  // Calendar
  .p-calendar {
    @apply w-full;
    
    .p-inputtext {
      @apply w-full;
    }
  }
}

// Attributes Section
.attributes-loading {
  @apply flex items-center justify-center gap-3 py-8 text-gray-500 dark:text-gray-400;
  
  i {
    @apply text-xl;
  }
  
  span {
    @apply text-sm font-medium;
  }
}

.attributes-form {
  @apply space-y-4;
}

// Enhanced Attributes Grid Layout
.attributes-grid {
  @apply grid grid-cols-1 lg:grid-cols-2 gap-4;
}

.attribute-card {
  @apply bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 transition-all duration-200;
  @apply hover:shadow-md hover:border-gray-300 dark:hover:border-gray-600;
  animation: fadeInUp 0.3s ease-out;
  
  &.attribute-card-required {
    @apply border-l-4 border-l-primary-500 dark:border-l-primary-400;
  }
  
  &.attribute-card-error {
    @apply border-red-300 dark:border-red-700 bg-red-50/30 dark:bg-red-900/10;
    @apply border-l-4 border-l-red-500 dark:border-l-red-400;
    animation: shake 0.4s ease-out;
  }
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  10%, 30%, 50%, 70%, 90% { transform: translateX(-4px); }
  20%, 40%, 60%, 80% { transform: translateX(4px); }
}

.attribute-card-header {
  @apply mb-3 pb-3 border-b border-gray-100 dark:border-gray-700;
}

.attribute-header-content {
  @apply flex items-start justify-between gap-2;
}

.attribute-label-group {
  @apply flex-1 flex flex-col gap-2;
}

.attribute-label {
  @apply flex items-center gap-2 mb-0;
  
  .attribute-label-text {
    @apply text-sm font-semibold text-gray-900 dark:text-gray-100;
  }
  
  .attribute-label-required {
    @apply text-red-500 dark:text-red-400 font-bold text-base;
  }
}

.attribute-optional-tag {
  @apply ml-2;
  
  ::ng-deep .p-tag {
    @apply text-xs px-2 py-0.5;
  }
}

.attribute-type-badge {
  @apply flex items-center gap-1.5 px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded-md text-xs text-gray-600 dark:text-gray-400;
  
  i {
    @apply text-xs;
  }
}

.attribute-card-body {
  @apply mb-3;
}

.attribute-input-wrapper {
  @apply w-full;
}

.input-wrapper-full,
.input-number-wrapper-full {
  @apply block w-full;
  
  .attribute-input {
    @apply w-full transition-all duration-200;
    
    &.ng-valid {
      @apply border-green-300 dark:border-green-700 focus:ring-green-500 dark:focus:ring-green-400;
    }
    
    &.ng-invalid.ng-touched {
      @apply border-red-500 dark:border-red-400 focus:ring-red-500 dark:focus:ring-red-400;
    }
  }
}

// PrimeNG Component Overrides for Attributes
::ng-deep {
  .attribute-card {
    // Input Number styling
    .p-inputnumber {
      &.ng-invalid.ng-touched {
        .p-inputnumber-input {
          @apply border-red-500 dark:border-red-400;
        }
      }
      
      &.ng-valid {
        .p-inputnumber-input {
          @apply border-green-300 dark:border-green-700;
        }
      }
    }
    
    // Calendar styling
    .p-calendar {
      &.ng-invalid.ng-touched {
        .p-inputtext {
          @apply border-red-500 dark:border-red-400;
        }
      }
      
      &.ng-valid {
        .p-inputtext {
          @apply border-green-300 dark:border-green-700;
        }
      }
    }
    
    // Input Switch styling
    .p-inputswitch {
      &.p-inputswitch-checked {
        .p-inputswitch-slider {
          @apply bg-primary-600 dark:bg-primary-500;
        }
      }
    }
    
    // Tag styling
    .p-tag {
      @apply text-xs px-2 py-0.5 font-medium;
    }
  }
}

.attribute-switch-wrapper {
  @apply flex items-center;
}

.switch-container-full {
  @apply flex items-center gap-3 w-full;
  
  .attribute-switch {
    @apply scale-110;
  }
  
  .switch-label {
    @apply flex items-center gap-2 text-sm font-medium;
    
    .switch-label-off {
      @apply text-gray-500 dark:text-gray-400;
    }
    
    .switch-label-on {
      @apply text-primary-600 dark:text-primary-400 font-semibold;
    }
  }
}

.attribute-card-footer {
  @apply min-h-[1.5rem] mt-2;
  
  .form-error {
    @apply flex items-center gap-2 text-xs text-red-600 dark:text-red-400 font-medium;
    @apply transition-all duration-200 ease-in-out;
    animation: slideDown 0.2s ease-out;
    
    i {
      @apply text-xs flex-shrink-0;
    }
  }
  
  .form-hint {
    @apply flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400;
    @apply transition-all duration-200 ease-in-out;
    animation: slideDown 0.2s ease-out;
    
    i {
      @apply text-xs flex-shrink-0;
    }
  }
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.attributes-summary {
  @apply mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg;
}

.summary-content {
  @apply flex items-start gap-3;
}

.summary-icon {
  @apply text-blue-600 dark:text-blue-400 text-lg flex-shrink-0 mt-0.5;
}

.summary-text {
  @apply flex-1;
}

.summary-title {
  @apply text-sm font-semibold text-gray-900 dark:text-gray-100 mb-1;
}

.summary-description {
  @apply text-xs text-gray-600 dark:text-gray-400 m-0;
  
  .required-indicator {
    @apply text-red-500 dark:text-red-400 font-bold;
  }
}

.attribute-field {
  @apply w-full;
  
  .form-label {
    @apply mb-2;
  }
  
  .form-input,
  .form-input-number,
  .form-calendar {
    @apply w-full;
  }
}

.attributes-empty {
  @apply flex flex-col items-center justify-center py-8 px-4 text-center border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-xl bg-gray-50 dark:bg-gray-800/50;
  
  .empty-content {
    @apply flex flex-col items-center gap-3 max-w-md;
  }
  
  .empty-icon {
    @apply text-4xl text-gray-400 dark:text-gray-500;
  }
  
  .empty-title {
    @apply text-base font-semibold text-gray-700 dark:text-gray-300 m-0;
  }
  
  .empty-description {
    @apply text-sm text-gray-500 dark:text-gray-400 m-0;
  }
  
  ::ng-deep .p-button {
    @apply mt-2;
  }
}

// Image Gallery (Following Court Pattern)
.image-gallery-list {
  @apply flex flex-wrap gap-4 mb-4;
}

.image-slot-container {
  @apply relative;
}

.image-slot-wrapper {
  @apply relative w-32 h-32 rounded-xl overflow-hidden border-2 border-gray-200 dark:border-gray-700 shadow-lg cursor-pointer transition-all duration-200;
  
  &:hover {
    @apply border-primary-400 dark:border-primary-500 shadow-xl;
  }
  
  .image-preview {
    @apply w-full h-full object-cover;
  }
  
  .image-placeholder {
    @apply w-full h-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center;
    
    i {
      @apply text-4xl text-gray-400 dark:text-gray-600;
    }
  }
  
  .image-slot-overlay {
    @apply absolute inset-0 bg-black bg-opacity-0 transition-all duration-200 flex items-center justify-center;
  }
  
  &:hover .image-slot-overlay {
    @apply bg-opacity-50;
  }
  
  .image-slot-actions {
    @apply flex gap-2 opacity-0 transition-opacity duration-200;
  }
  
  &:hover .image-slot-actions {
    @apply opacity-100;
  }
  
  .image-action-btn {
    @apply text-white;
  }
  
  .primary-badge {
    @apply absolute top-2 left-2 bg-yellow-500 text-white text-xs px-2 py-1 rounded-full flex items-center gap-1 font-medium shadow-md;
    
    i {
      @apply text-xs;
    }
  }
  
  .image-index {
    @apply absolute bottom-2 right-2 bg-black bg-opacity-70 text-white text-xs px-2 py-1 rounded-full font-medium;
  }
}

.image-gallery-footer {
  @apply flex items-center;
  
  .btn-add-image {
    @apply flex items-center gap-2 px-4 py-2 bg-primary-500 hover:bg-primary-600 text-white rounded-lg transition-colors duration-200 font-medium;
    
    i {
      @apply text-sm;
    }
    
    &:hover {
      @apply shadow-md;
    }
  }
}

// Responsive Design
@media (max-width: 640px) {
  .dialog-header-content {
    @apply flex-col gap-3;
  }
  
  .dialog-icon-wrapper {
    @apply w-10 h-10;
    
    i {
      @apply text-xl;
    }
  }
  
  .switch-container {
    @apply flex-col items-stretch gap-3;
  }
  
  .status-switch {
    @apply scale-110 self-end;
  }
  
  .dialog-footer {
    @apply flex-col w-full;
    
    .footer-btn {
      @apply w-full justify-center;
    }
  }
  
  .image-gallery {
    @apply grid-cols-2;
  }
  
  .gallery-item-wrapper {
    .gallery-image {
      @apply w-full h-full;
    }
  }
  
  // Attributes responsive
  .attributes-grid {
    @apply gap-3;
  }
  
  .attribute-card {
    @apply p-3;
  }
  
  .attribute-card-header {
    @apply mb-2 pb-2;
  }
  
  .attribute-type-badge {
    @apply text-xs px-1.5 py-0.5;
  }
  
  .switch-container-full {
    @apply flex-col items-start gap-2;
    
    .attribute-switch {
      @apply scale-100;
    }
  }
}

// Tablet responsive for attributes
@media (max-width: 1024px) {
  .attributes-grid {
    @apply grid-cols-1;
  }
}
